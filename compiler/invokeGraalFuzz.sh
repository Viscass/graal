#!/bin/bash

# TODO: need to change the hardcoded locations that are specific to my machine

if [ $# -lt 1 ]; then
    echo "Usage: $0 (testWithGeneratedCode | testNestedIfs)"
    exit 1
fi
/home/al/graalvm/graal/sdk/mxbuild/linux-amd64/GRAALJDK_CE_71C25D3E58_JAVA17/graaljdk-ce-71c25d3e58-java17-23.0.0-dev/bin/java -server -XX:+UnlockExperimentalVMOptions -XX:+EnableJVMCI -Dgraal.CompilationFailureAction=Diagnose \
-Dgraal.DumpOnError=true -Dgraal.ShowDumpFiles=true -Dgraal.PrintGraph=Network -Dgraal.ObjdumpExecutables=objdump,gobjdump -Dgraalvm.locatorDisabled=true --enable-preview -esa -ea -Djava.awt.headless=true \
-Xbootclasspath/a:/home/al/.mx/cache/JQF_INSTRUMENT_1ee31a0677c3d71cc43d81ce3640c41556bcd965/jqf-instrument.jar:/home/al/.mx/cache/ASM_9.1_0a586544f3053ec8425d252b6f7e3e6772f010eb81d75020b4fd4759a561a4534dab4f805ffd18130594d1abbeb1ad7116b9d3a1e2e643d427e12bb866655954/asm-9.1.jar \
-javaagent:/home/al/.mx/cache/JQF_INSTRUMENT_1ee31a0677c3d71cc43d81ce3640c41556bcd965/jqf-instrument.jar \
-Djanala.conf=/home/al/graalvm/graal/compiler/janala.conf \
-cp /home/al/.mx/cache/HAMCREST_e237ae735aac4fa5a7253ec693191f42ef7ddce384c11d29fbf605981c0be077d086757409acad53cb5b9e53d86a07cc428d459ff0f5b00d32a8cbbca390be49/hamcrest.jar:/home/al/.mx/cache/JUNIT_cdd00374f1fee76b11e2a9d127405aa3f6be5b6a/junit.jar:/home/al/graalvm/mx/mxbuild/jdk17/dists/jdk9/junit-tool.jar:/home/al/.mx/cache/JAVA_ALLOCATION_INSTRUMENTER_25fe57cd6d3ecabb52f411c884f801109ece37570a2dd19fa1e5b83cc2039ed02a90787600eb9303eaa730aabf0dc70b506fb9fe40ca6c3417428bb89c2c8940/java-allocation-instrumenter.jar:/home/al/graalvm/graal/compiler/mxbuild/jdk17/dists/jdk11/graal-only-test.jar:/home/al/graalvm/graal/sdk/mxbuild/jdk17/dists/jdk11/polyglot-tck.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-tck.jar:/home/al/.mx/cache/ANTLR4_362994710ffebe81c200ffd6031e1158f8128da7e7f568c6d46bb2412c41d859b5d5cb162bf594d49faa1e895de3aceee66fa5a79e91e01117a028d800eb497c/antlr4.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-sl.jar:/home/al/.mx/cache/JOPTSIMPLE_4_6_18bf59191d7a456e7675c841df8411ebe425da40532e103db95483be5d2a75510d8a38ad9755cdd4e0be27afe7cfd0b358599388a84fcec1ee27e89caa37f5af/joptsimple-4-6.jar:/home/al/.mx/cache/JMH_GENERATOR_ANNPROCESS_1_21_352deb5304ad54d8089485ce066e409c689012a0dee5af4fd8511402cd35624dd4cabd507b876115304c0c9824b837e96028500e279ba164480e1195a757b45c/jmh-generator-annprocess-1-21.jar:/home/al/.mx/cache/COMMONS_MATH3_3_2_80fb66a51688c4247b957f9787921e5acb9144d71a4ab0b03b2c30f46427e50c53e6e31ca5ddb04dab2cf5e7c0eedae168103c719f8074be464918ab2e4d6e6d/commons-math3-3-2.jar:/home/al/.mx/cache/JMH_1_21_81bca9388bdd0612fa65ca85ccaec5ba01738d7e45e76ea90f64dfb89539ad4dbfca064189dcc05a43f0f3f1bd0b6124676968a953ff7989b06232ff8d00574b/jmh-1-21.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-sl-test.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-tck-common.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-tck-tests.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-nfi.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-nfi-libffi.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-dsl-processor.jar:/home/al/.mx/cache/VISUALVM-LIB-JFLUID-HEAP_6d93cde728f5db242d2ab55090e5b2952e873625e542043d16d859e1486433c91efcf3c713d7255697951ee745cd5f66276b78f38c62c422cd7b1000291612ad/visualvm-lib-jfluid-heap.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-test.jar:/home/al/.mx/cache/ICU4J_48130eb346a5bb5bdaff867e5231808a3cd03d1876d8e6b7c501336df6992e912f7c53456dc72b673ad3272f3b54b414343eea8a1118d01d0e517403cab3e324/icu4j.jar:/home/al/graalvm/graal/regex/mxbuild/jdk17/dists/jdk11/tregex.jar:/home/al/graalvm/graal/compiler/mxbuild/jdk17/dists/jdk17/graal-test.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-sl-tck.jar:/home/al/graalvm/graal/regex/mxbuild/jdk17/dists/jdk11/tregex-unit-tests.jar:/home/al/graalvm/graal/truffle/mxbuild/jdk17/dists/jdk11/truffle-tck-instrumentation.jar \
-Dtruffle.nfi.library=/home/al/graalvm/graal/truffle/mxbuild/linux-amd64/TRUFFLE_NFI_NATIVE/bin/libtrufflenfi.so -Dnative.test.path=/home/al/graalvm/graal/truffle/mxbuild/linux-amd64/truffle-test-native \
--add-exports=java.base/jdk.internal.module=ALL-UNNAMED -Dpolyglot.engine.WarnInterpreterOnly=false --add-exports=java.base/jdk.internal.module=ALL-UNNAMED \
--add-opens=java.base/java.lang=ALL-UNNAMED \
--add-modules=ALL-MODULE-PATH @jvmci_exports @graal_exports \
--add-opens=jdk.internal.vm.compiler.management/org.graalvm.compiler.management=ALL-UNNAMED \
--add-opens=jdk.internal.vm.compiler.truffle.jfr/org.graalvm.compiler.truffle.jfr.impl=ALL-UNNAMED \
 @truffle_api_exports @graal_sdk_exports \
-Dtruffle.nfi.library=/home/al/graalvm/graal/truffle/mxbuild/linux-amd64/TRUFFLE_NFI_NATIVE/bin/libtrufflenfi.so --add-modules=jdk.internal.vm.compiler --add-modules=jdk.internal.vm.compiler.management \
--add-modules=jdk.internal.vm.compiler.truffle.jfr --add-modules=org.graalvm.truffle --add-modules=org.graalvm.sdk -Dgraal.TrackNodeSourcePosition=true -esa -XX:-UseJVMCICompiler -XX:TypeProfileWidth=8 \
-Dpolyglot.engine.DynamicCompilationThresholds=false -Dpolyglot.engine.AllowExperimentalOptions=true \
edu.berkeley.cs.jqf.fuzz.ei.ZestDriver org.graalvm.compiler.core.test.generating.SimpleGeneratedCodeTest $1
